<!DOCTYPE html>
<html lang="ar" dir="rtl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>تشكيلة لجنة الامتحانات</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"
    />
    <style>
      body {
        font-family: "Cairo", Arial, sans-serif;
        background-color: #f0f0f0;
        margin: 0;
        padding: 20px;
        direction: rtl;
        transition: background-color 0.5s ease;
      }
      h1 {
        text-align: center;
        color: #2c3e50;
        animation: fadeIn 1s ease-in;
      }
      .football-field {
        width: 100%;
        max-width: 800px;
        height: 80vh;
        max-height: 600px;
        background-color: #4caf50;
        margin: 0 auto;
        position: relative;
        border: 5px solid white;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
        background-image: linear-gradient(to right, white 2px, transparent 2px),
          linear-gradient(to bottom, white 2px, transparent 2px);
        background-size: 100px 100px;
        animation: fieldFadeIn 1.2s ease-in;
      }
      .center-circle {
        width: 150px;
        height: 150px;
        border: 5px solid white;
        border-radius: 50%;
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        animation: drawCircle 1.5s ease-out;
      }
      @keyframes drawCircle {
        0% {
          width: 0;
          height: 0;
          opacity: 0;
        }
        100% {
          width: 150px;
          height: 150px;
          opacity: 1;
        }
      }
      .goal-area {
        width: 150px;
        height: 50px;
        border: 5px solid white;
        position: absolute;
        animation: slideIn 0.8s ease-out;
      }
      @keyframes slideIn {
        0% {
          width: 0;
          opacity: 0;
        }
        100% {
          width: 150px;
          opacity: 1;
        }
      }
      .goal-area-top {
        top: 0;
        left: 50%;
        transform: translateX(-50%);
      }
      .goal-area-bottom {
        bottom: 0;
        left: 50%;
        transform: translateX(-50%);
      }
      .player {
        width: clamp(40px, 8vw, 60px);
        height: clamp(40px, 8vw, 60px);
        background-color: #e74c3c;
        border-radius: 50%;
        color: white;
        display: flex;
        justify-content: center;
        align-items: center;
        position: absolute;
        text-align: center;
        font-size: clamp(8px, 1.2vw, 10px);
        font-weight: bold;
        cursor: pointer;
        transition: all 0.3s;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
        z-index: 2;
        animation: none;
      }
      .player:hover {
        transform: scale(1.1);
        z-index: 10;
        box-shadow: 0 0 15px rgba(0, 0, 0, 0.8);
      }
      .player.dragging {
        opacity: 0.5;
        transform: scale(1.1);
      }
      .player-name {
        max-width: 100%;
        word-wrap: break-word;
      }
      .controls {
        margin: 20px auto;
        text-align: center;
        animation: fadeIn 1s ease-in;
      }
      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
      @keyframes fieldFadeIn {
        from {
          opacity: 0;
          transform: scale(0.95);
        }
        to {
          opacity: 1;
          transform: scale(1);
        }
      }
      button {
        padding: 10px 20px;
        margin: 0 5px;
        background-color: #3498db;
        color: white;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        font-family: "Cairo", Arial, sans-serif;
        transition: all 0.3s;
        position: relative;
        overflow: hidden;
      }
      button:hover {
        background-color: #2980b9;
        transform: translateY(-3px);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
      }
      button:active {
        transform: translateY(-1px);
      }
      button::after {
        content: "";
        position: absolute;
        width: 100%;
        height: 100%;
        top: 0;
        left: 0;
        background-color: rgba(255, 255, 255, 0.3);
        border-radius: 5px;
        transform: scaleX(0);
        transform-origin: right;
        transition: transform 0.3s;
      }
      button:hover::after {
        transform: scaleX(1);
        transform-origin: left;
      }
      .formation-name {
        text-align: center;
        font-size: 18px;
        margin-bottom: 10px;
        font-weight: bold;
        animation: fadeIn 0.8s ease-in;
      }
      .player-list {
        width: 100%;
        max-width: 800px;
        overflow-x: auto;
        background-color: white;
        padding: 20px;
        border-radius: 10px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        animation: expandDown 0.5s forwards;
      }
      @keyframes expandDown {
        from {
          opacity: 0;
          max-height: 0;
          transform: translateY(-20px);
        }
        to {
          opacity: 1;
          max-height: 1000px;
          transform: translateY(0);
        }
      }
      table {
        width: 100%;
        border-collapse: collapse;
      }
      th,
      td {
        padding: 10px;
        text-align: right;
        border-bottom: 1px solid #ddd;
      }
      th {
        background-color: #3498db;
        color: white;
      }
      .toggle-list {
        margin-top: 20px;
      }

      /* بنش اللاعبين (الاحتياطي) */
      .player-bench {
        width: 100%;
        max-width: 800px;
        min-height: 120px;
        background-color: #34495e;
        margin: 20px auto;
        padding: 10px;
        border-radius: 10px;
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        gap: 10px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
        animation: fadeIn 1s ease-in;
      }
      .bench-title {
        width: 100%;
        color: white;
        text-align: center;
        font-size: 18px;
        margin-bottom: 10px;
      }
      .bench-player {
        width: clamp(35px, 7vw, 50px);
        height: clamp(35px, 7vw, 50px);
        background-color: #9b59b6;
        border-radius: 50%;
        color: white;
        display: flex;
        justify-content: center;
        align-items: center;
        text-align: center;
        font-size: clamp(6px, 1vw, 8px);
        font-weight: bold;
        cursor: pointer;
        transition: all 0.3s;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
        animation: none;
      }
      .bench-player:hover {
        transform: scale(1.1);
        background-color: #8e44ad;
        box-shadow: 0 0 15px rgba(0, 0, 0, 0.6);
      }
      .dropzone {
        border: 2px dashed rgba(255, 255, 255, 0.4);
        background-color: rgba(255, 255, 255, 0.1);
      }

      /* Theme toggle */
      .theme-toggle {
        position: fixed;
        top: 20px;
        left: 20px;
        background-color: #2c3e50;
        color: white;
        width: 40px;
        height: 40px;
        border-radius: 50%;
        display: flex;
        justify-content: center;
        align-items: center;
        cursor: pointer;
        transition: all 0.3s;
        z-index: 100;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
      }
      .theme-toggle:hover {
        transform: rotate(180deg);
        background-color: #e74c3c;
      }

      /* Dark theme */
      body.dark-theme {
        background-color: #2c3e50;
        color: white;
      }
      body.dark-theme h1 {
        color: #ecf0f1;
      }
      body.dark-theme .football-field {
        background-color: #27ae60;
        box-shadow: 0 0 15px rgba(0, 0, 0, 0.5);
      }
      body.dark-theme .player {
        background-color: #e74c3c;
      }
      body.dark-theme .bench-player {
        background-color: #8e44ad;
      }
      body.dark-theme .bench-player:hover {
        background-color: #9b59b6;
      }
      body.dark-theme .player-list {
        background-color: #34495e;
        color: white;
      }
      body.dark-theme td {
        border-bottom: 1px solid #3498db;
        color: #ecf0f1;
      }
      body.dark-theme .player-bench {
        background-color: #2c3e50;
        box-shadow: 0 0 15px rgba(0, 0, 0, 0.5);
      }

      /* إضافة أنماط للتبديل */
      .player.switching,
      .bench-player.switching {
        animation: bounceOut 0.5s forwards;
      }

      .player.switched,
      .bench-player.switched {
        animation: bounceIn 0.5s forwards;
      }

      /* Media Queries للأجهزة المختلفة */
      @media screen and (max-width: 768px) {
        body {
          padding: 10px;
          overflow-x: hidden;
        }

        h1 {
          font-size: 1.2rem;
          padding: 0 10px;
          word-wrap: break-word;
        }

        .football-field {
          width: 95%;
          height: 60vh;
          margin: 10px auto;
        }

        .player-bench {
          width: 95%;
          padding: 5px;
          margin: 10px auto;
        }

        .controls {
          width: 100%;
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
          gap: 5px;
          padding: 5px;
        }

        button {
          width: 100%;
          padding: 8px 5px;
          font-size: 14px;
          margin: 0;
          white-space: nowrap;
        }

        .player {
          width: clamp(30px, 10vw, 40px);
          height: clamp(30px, 10vw, 40px);
          font-size: clamp(6px, 1.8vw, 8px);
        }

        .bench-player {
          width: clamp(25px, 8vw, 35px);
          height: clamp(25px, 8vw, 35px);
          font-size: clamp(5px, 1.5vw, 7px);
        }

        .player-name {
          font-size: clamp(8px, 2.5vw, 10px);
          line-height: 1.2;
        }

        .player-list {
          width: 95%;
          margin: 10px auto;
          overflow-x: auto;
        }

        table {
          min-width: 100%;
        }

        th,
        td {
          padding: 8px 5px;
          font-size: 12px;
          white-space: nowrap;
        }
      }

      @media screen and (max-width: 480px) {
        h1 {
          font-size: 1rem;
        }

        .formation-name {
          font-size: 14px;
        }

        .controls {
          grid-template-columns: repeat(2, 1fr);
        }

        button {
          font-size: 12px;
          padding: 6px 3px;
        }

        .player {
          width: clamp(35px, 12vw, 50px);
          height: clamp(35px, 12vw, 50px);
        }

        .bench-player {
          width: clamp(30px, 10vw, 45px);
          height: clamp(30px, 10vw, 45px);
        }

        .player-name {
          font-size: clamp(6px, 2vw, 8px);
        }

        .bench-title {
          font-size: 14px;
        }

        .player-list {
          padding: 10px 5px;
        }

        .player-list h2 {
          font-size: 16px;
        }

        .player-list table {
          width: 100%;
          min-width: 300px;
        }

        .player-list {
          overflow-x: auto;
          -webkit-overflow-scrolling: touch;
        }
      }

      @media screen and (orientation: portrait) {
        .football-field {
          height: 50vh;
        }

        .player-bench {
          min-height: 80px;
        }
      }

      @media screen and (orientation: landscape) and (max-width: 900px) {
        .football-field {
          height: 70vh;
        }

        .controls {
          grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
        }
      }
    </style>
  </head>
  <body>
    <div class="theme-toggle" onclick="toggleTheme()">🌓</div>
    <h1>تشكيلة فريق كرة القدم - مدرسة السويس للتكنولوجيا التطبيقية</h1>
    <div class="formation-name" id="formation-name">التشكيل 4-4-2</div>

    <div class="football-field" id="field">
      <div class="center-circle"></div>
      <div class="goal-area goal-area-top"></div>
      <div class="goal-area goal-area-bottom"></div>
    </div>

    <div class="player-bench" id="player-bench">
      <div class="bench-title">لاعبي الاحتياط</div>
      <!-- سيتم إضافة لاعبي الاحتياط هنا بواسطة الجافاسكربت -->
    </div>

    <div class="controls">
      <button onclick="changeFormation('4-4-2')">تشكيل 4-4-2</button>
      <button onclick="changeFormation('4-3-3')">تشكيل 4-3-3</button>
      <button onclick="changeFormation('3-5-2')">تشكيل 3-5-2</button>
      <button onclick="changeFormation('5-3-2')">تشكيل 5-3-2</button>
      <button onclick="togglePlayerList()" class="toggle-list">
        عرض قائمة اللاعبين
      </button>
    </div>

    <div class="player-list" id="player-list">
      <h2>قائمة اللاعبين</h2>
      <table>
        <tr>
          <th>م</th>
          <th>اسم الطالب</th>
          <th>رقم الجلوس</th>
        </tr>
      </table>
    </div>

    <script>
      // بيانات الطلاب
      const players = [
        {
          id: 1,
          name: getTripleName("حازم محمد عز الدين محمد قاسم"),
          seatNumber: "C355",
        },
        {
          id: 2,
          name: getTripleName("رامي عبدالكريم احمد محمد"),
          seatNumber: "C356",
        },
        {
          id: 3,
          name: getTripleName("شادي خلف الله احمد"),
          seatNumber: "C357",
        },
        {
          id: 4,
          name: getTripleName("سيف الدين محمد صلاح زغلول"),
          seatNumber: "C358",
        },
        {
          id: 5,
          name: getTripleName("سيف الله مصطفى غريب مصطفى محمد"),
          seatNumber: "C359",
        },
        {
          id: 6,
          name: getTripleName("شهيد محمد محمود السيد"),
          seatNumber: "C360",
        },
        {
          id: 7,
          name: getTripleName("طارق غريب جاد الرب عبد المجيد"),
          seatNumber: "C361",
        },
        {
          id: 8,
          name: getTripleName("عبدالرحمن رياض حافظ محمد"),
          seatNumber: "C362",
        },
        {
          id: 9,
          name: getTripleName("عبدالله حسام محمود محمد عبد الرحيم"),
          seatNumber: "C363",
        },
        {
          id: 10,
          name: getTripleName("عبدالله محمود حسين محمد"),
          seatNumber: "C364",
        },
        {
          id: 11,
          name: getTripleName("عدوي محمود عدوي محمود عبد"),
          seatNumber: "C365",
        },
        {
          id: 12,
          name: getTripleName("علي احمد سعيد علي محمود"),
          seatNumber: "C366",
        },
        {
          id: 13,
          name: getTripleName("عمر عبد العزيز احمد العزب"),
          seatNumber: "C367",
        },
        {
          id: 14,
          name: getTripleName("عمر محمد فاروق محمد"),
          seatNumber: "C368",
        },
        {
          id: 15,
          name: getTripleName("كريم حسين حسن حسين"),
          seatNumber: "C369",
        },
        {
          id: 16,
          name: getTripleName("محمد احمد شحته احمد"),
          seatNumber: "C370",
        },
        {
          id: 17,
          name: getTripleName("محمد محمود سلامه احمد"),
          seatNumber: "C371",
        },
        {
          id: 18,
          name: getTripleName("محمد محمود عبد الفتاح ابو الحسن"),
          seatNumber: "C372",
        },
      ];

      // دالة لاستخراج الاسم الثلاثي
      function getTripleName(fullName) {
        const names = fullName.split(" ");
        return names.slice(0, 3).join(" ");
      }

      // تبديل السمة (الثيم)
      function toggleTheme() {
        document.body.classList.toggle("dark-theme");
      }

      // إنشاء جدول اللاعبين
      function createPlayerTable() {
        const table = document.querySelector(".player-list table");

        players.forEach((player) => {
          const row = document.createElement("tr");
          row.innerHTML = `
                    <td>${player.id}</td>
                    <td>${player.name}</td>
                    <td>${player.seatNumber}</td>
                `;
          table.appendChild(row);
        });
      }

      createPlayerTable();

      // تعريف مواقع اللاعبين حسب كل تشكيل
      const formations = {
        "4-4-2": [
          { top: "85%", left: "50%", name: "عبدالله محمود" }, // حارس المرمى
          // خط الدفاع
          { top: "70%", left: "15%", name: "رامي عبدالكريم" },
          { top: "70%", left: "35%", name: "شادي خلف" },
          { top: "70%", left: "65%", name: "سيف الدين" },
          { top: "70%", left: "85%", name: "سيف الله" },
          // خط الوسط
          { top: "45%", left: "15%", name: "شهيد محمد" },
          { top: "45%", left: "35%", name: "طارق غريب" },
          { top: "45%", left: "65%", name: "عبدالرحمن" },
          { top: "45%", left: "85%", name: "عبدالله حسام" },
          // خط الهجوم
          { top: "20%", left: "35%", name: "عدوي محمود" },
          { top: "20%", left: "65%", name: "حازم محمد" },
        ],

        "4-3-3": [
          { top: "85%", left: "50%", name: "عبدالله محمود" },
          // خط الدفاع
          { top: "70%", left: "15%", name: "رامي عبدالكريم" },
          { top: "70%", left: "35%", name: "شادي خلف" },
          { top: "70%", left: "65%", name: "سيف الدين" },
          { top: "70%", left: "85%", name: "سيف الله" },
          // خط الوسط
          { top: "45%", left: "30%", name: "شهيد محمد" },
          { top: "45%", left: "50%", name: "طارق غريب" },
          { top: "45%", left: "70%", name: "عبدالرحمن" },
          // خط الهجوم
          { top: "20%", left: "25%", name: "عبدالله حسام" },
          { top: "15%", left: "50%", name: "حازم محمد" },
          { top: "20%", left: "75%", name: "عدوي محمود" },
        ],

        "3-5-2": [
          { top: "85%", left: "50%", name: "عبدالله محمود" },
          // خط الدفاع
          { top: "70%", left: "30%", name: "رامي عبدالكريم" },
          { top: "70%", left: "50%", name: "شادي خلف" },
          { top: "70%", left: "70%", name: "سيف الدين" },
          // خط الوسط
          { top: "45%", left: "15%", name: "سيف الله" },
          { top: "45%", left: "30%", name: "شهيد محمد" },
          { top: "40%", left: "50%", name: "طارق غريب" },
          { top: "45%", left: "70%", name: "عبدالرحمن" },
          { top: "45%", left: "85%", name: "عبدالله حسام" },
          // خط الهجوم
          { top: "20%", left: "35%", name: "عدوي محمود" },
          { top: "20%", left: "65%", name: "حازم محمد" },
        ],

        "5-3-2": [
          { top: "85%", left: "50%", name: "عبدالله محمود" },
          // خط الدفاع
          { top: "70%", left: "15%", name: "رامي عبدالكريم" },
          { top: "72%", left: "30%", name: "شادي خلف" },
          { top: "75%", left: "50%", name: "سيف الدين" },
          { top: "72%", left: "70%", name: "سيف الله" },
          { top: "70%", left: "85%", name: "شهيد محمد" },
          // خط الوسط
          { top: "45%", left: "30%", name: "طارق غريب" },
          { top: "40%", left: "50%", name: "عبدالرحمن" },
          { top: "45%", left: "70%", name: "عبدالله حسام" },
          // خط الهجوم
          { top: "20%", left: "35%", name: "عدوي محمود" },
          { top: "20%", left: "65%", name: "حازم محمد" },
        ],
      };

      // تعديل دالة إضافة اللاعبين
      function addPlayersToField(formation) {
        const field = document.getElementById("field");
        const bench = document.getElementById("player-bench");

        // إزالة اللاعبين الحاليين من الملعب ودكة الاحتياط
        const existingPlayers = document.querySelectorAll(
          ".player, .bench-player"
        );
        existingPlayers.forEach((player) => player.remove());

        // الحصول على مواقع اللاعبين للتشكيل المحدد
        const positions = formations[formation];

        // إضافة 11 لاعب للملعب
        positions.forEach((pos, index) => {
          const player = document.createElement("div");
          player.className = "player animate__animated animate__fadeIn";
          player.id = `player-${index}`;
          player.innerHTML = `<div class="player-name">${pos.name}</div>`;
          player.style.top = pos.top;
          player.style.left = pos.left;
          player.title = pos.name;

          setTimeout(() => {
            field.appendChild(player);
          }, index * 100);
        });

        // إضافة باقي اللاعبين للاحتياط
        const benchPlayers = players.filter(
          (player) => !positions.some((pos) => pos.name === player.name)
        );

        benchPlayers.forEach((player, index) => {
          const benchPlayer = document.createElement("div");
          benchPlayer.className =
            "bench-player animate__animated animate__fadeIn";
          benchPlayer.id = `bench-player-${index}`;
          benchPlayer.innerHTML = `<div class="player-name">${player.name}</div>`;
          benchPlayer.title = `${player.name} - ${player.seatNumber}`;
          benchPlayer.draggable = true;

          setTimeout(() => {
            bench.appendChild(benchPlayer);
          }, index * 100 + 500);
        });

        // تحديث اسم التشكيل
        document.getElementById(
          "formation-name"
        ).textContent = `التشكيل ${formation}`;

        // إعادة تعيين وظائف السحب والإفلات
        setTimeout(() => {
          setupDragAndDrop();
        }, 1000);
      }

      function changeFormation(formation) {
        addPlayersToField(formation);
      }

      function togglePlayerList() {
        const playerList = document.getElementById("player-list");
        if (playerList.style.display === "block") {
          playerList.style.display = "none";
        } else {
          playerList.style.display = "block";
        }
      }

      // وظائف السحب والإفلات المُحسّنة
      function setupDragAndDrop() {
        const draggables = document.querySelectorAll(".player, .bench-player");
        const droppables = [
          document.getElementById("field"),
          document.getElementById("player-bench"),
        ];

        draggables.forEach((draggable) => {
          draggable.addEventListener("dragstart", dragStart);
          draggable.addEventListener("dragend", dragEnd);
        });

        droppables.forEach((droppable) => {
          droppable.addEventListener("dragover", dragOver);
          droppable.addEventListener("dragenter", dragEnter);
          droppable.addEventListener("dragleave", dragLeave);
          droppable.addEventListener("drop", drop);
        });
      }

      function dragStart(e) {
        this.classList.add("dragging");
        e.dataTransfer.setData("text/plain", this.id);
        e.dataTransfer.setData(
          "application/json",
          JSON.stringify({
            id: this.id,
            playerId: this.getAttribute("data-player-id"),
            name: this.querySelector(".player-name").textContent,
            fromField: this.classList.contains("player"),
          })
        );

        setTimeout(() => {
          this.style.opacity = "0.4";
        }, 0);
      }

      function dragEnd() {
        this.classList.remove("dragging");
        this.style.opacity = "1";
      }

      function dragOver(e) {
        e.preventDefault();
      }

      function dragEnter(e) {
        e.preventDefault();
        this.classList.add("dropzone");
      }

      function dragLeave() {
        this.classList.remove("dropzone");
      }

      function drop(e) {
        e.preventDefault();
        this.classList.remove("dropzone");

        const toField = this.id === "field";

        // التحقق من عدد اللاعبين في الملعب قبل الإضافة
        if (toField) {
          const currentPlayers = document.querySelectorAll(".player").length;
          if (currentPlayers >= 11) {
            alert("لا يمكن إضافة أكثر من 11 لاعب في الملعب!");
            return;
          }
        }

        const data = JSON.parse(e.dataTransfer.getData("application/json"));
        const draggedElement = document.getElementById(data.id);

        if (!draggedElement) return;

        const fromField = data.fromField;

        // إضافة فئة الرسم المتحرك للعنصر المسحوب
        draggedElement.classList.add("animate__animated", "animate__bounceOut");

        setTimeout(() => {
          draggedElement.remove();

          const newElement = document.createElement("div");

          if (toField) {
            newElement.className = "player animate__animated animate__bounceIn";
            newElement.id = `player-field-${Date.now()}`;

            const fieldRect = this.getBoundingClientRect();
            const x = e.clientX - fieldRect.left;
            const y = e.clientY - fieldRect.top;

            newElement.style.left = `${(x / fieldRect.width) * 100}%`;
            newElement.style.top = `${(y / fieldRect.height) * 100}%`;
          } else {
            newElement.className =
              "bench-player animate__animated animate__bounceIn";
            newElement.id = `player-bench-${Date.now()}`;
          }

          newElement.setAttribute("data-player-id", data.playerId);
          newElement.innerHTML = `<div class="player-name">${data.name}</div>`;
          newElement.draggable = true;
          newElement.addEventListener("dragstart", dragStart);
          newElement.addEventListener("dragend", dragEnd);

          this.appendChild(newElement);

          // إزالة فئات الرسوم المتحركة بعد الانتهاء
          setTimeout(() => {
            newElement.classList.remove(
              "animate__animated",
              "animate__bounceIn"
            );
          }, 1000);
        }, 500);
      }

      // تحميل التشكيل الافتراضي
      window.onload = function () {
        addPlayersToField("4-4-2");
      };
    </script>
  </body>
</html>
