<!DOCTYPE html>
<html lang="ar" dir="rtl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>تشكيلة كرة القدم</title>
    <style>
      body {
        font-family: "Cairo", Arial, sans-serif;
        background-color: #f0f0f0;
        margin: 0;
        padding: 20px;
        direction: rtl;
        transition: background-color 0.5s ease;
      }
      h1 {
        text-align: center;
        color: #2c3e50;
        animation: fadeIn 1s ease-in;
      }
      .football-field {
        width: 800px;
        height: 600px;
        background-color: #4caf50;
        margin: 0 auto;
        position: relative;
        border: 5px solid white;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
        background-image: linear-gradient(to right, white 2px, transparent 2px),
          linear-gradient(to bottom, white 2px, transparent 2px);
        background-size: 100px 100px;
        animation: fieldFadeIn 1.2s ease-in;
      }
      .center-circle {
        width: 150px;
        height: 150px;
        border: 5px solid white;
        border-radius: 50%;
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        animation: drawCircle 1.5s ease-out;
      }
      @keyframes drawCircle {
        0% {
          width: 0;
          height: 0;
          opacity: 0;
        }
        100% {
          width: 150px;
          height: 150px;
          opacity: 1;
        }
      }
      .goal-area {
        width: 150px;
        height: 50px;
        border: 5px solid white;
        position: absolute;
        animation: slideIn 0.8s ease-out;
      }
      @keyframes slideIn {
        0% {
          width: 0;
          opacity: 0;
        }
        100% {
          width: 150px;
          opacity: 1;
        }
      }
      .goal-area-top {
        top: 0;
        left: 50%;
        transform: translateX(-50%);
      }
      .goal-area-bottom {
        bottom: 0;
        left: 50%;
        transform: translateX(-50%);
      }
      .player {
        width: 80px;
        height: 80px;
        background-color: #e74c3c;
        border-radius: 50%;
        color: white;
        display: flex;
        justify-content: center;
        align-items: center;
        position: absolute;
        text-align: center;
        font-size: 12px;
        font-weight: bold;
        cursor: pointer;
        transition: all 0.3s;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
        z-index: 2;
        animation: playerAppear 0.5s ease-out;
      }
      @keyframes playerAppear {
        0% {
          transform: scale(0);
          opacity: 0;
        }
        70% {
          transform: scale(1.1);
        }
        100% {
          transform: scale(1);
          opacity: 1;
        }
      }
      .player:hover {
        transform: scale(1.1);
        z-index: 10;
        box-shadow: 0 0 15px rgba(0, 0, 0, 0.8);
      }
      .player.dragging {
        opacity: 0.5;
        transform: scale(1.1);
      }
      .player-name {
        max-width: 100%;
        word-wrap: break-word;
      }
      .controls {
        margin: 20px auto;
        text-align: center;
        animation: fadeIn 1s ease-in;
      }
      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
      @keyframes fieldFadeIn {
        from {
          opacity: 0;
          transform: scale(0.95);
        }
        to {
          opacity: 1;
          transform: scale(1);
        }
      }
      button {
        padding: 10px 20px;
        margin: 0 5px;
        background-color: #3498db;
        color: white;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        font-family: "Cairo", Arial, sans-serif;
        transition: all 0.3s;
        position: relative;
        overflow: hidden;
      }
      button:hover {
        background-color: #2980b9;
        transform: translateY(-3px);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
      }
      button:active {
        transform: translateY(-1px);
      }
      button::after {
        content: "";
        position: absolute;
        width: 100%;
        height: 100%;
        top: 0;
        left: 0;
        background-color: rgba(255, 255, 255, 0.3);
        border-radius: 5px;
        transform: scaleX(0);
        transform-origin: right;
        transition: transform 0.3s;
      }
      button:hover::after {
        transform: scaleX(1);
        transform-origin: left;
      }
      .formation-name {
        text-align: center;
        font-size: 18px;
        margin-bottom: 10px;
        font-weight: bold;
        animation: fadeIn 0.8s ease-in;
      }
      .player-list {
        width: 800px;
        margin: 20px auto;
        display: none;
        background-color: white;
        padding: 20px;
        border-radius: 10px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        animation: expandDown 0.5s forwards;
      }
      @keyframes expandDown {
        from {
          opacity: 0;
          max-height: 0;
          transform: translateY(-20px);
        }
        to {
          opacity: 1;
          max-height: 1000px;
          transform: translateY(0);
        }
      }
      table {
        width: 100%;
        border-collapse: collapse;
      }
      th,
      td {
        padding: 10px;
        text-align: right;
        border-bottom: 1px solid #ddd;
      }
      th {
        background-color: #3498db;
        color: white;
      }
      .toggle-list {
        margin-top: 20px;
      }

      /* بنش اللاعبين (الاحتياطي) */
      .player-bench {
        width: 800px;
        min-height: 120px;
        background-color: #34495e;
        margin: 20px auto;
        padding: 10px;
        border-radius: 10px;
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        gap: 10px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
        animation: fadeIn 1s ease-in;
      }
      .bench-title {
        width: 100%;
        color: white;
        text-align: center;
        font-size: 18px;
        margin-bottom: 10px;
      }
      .bench-player {
        width: 70px;
        height: 70px;
        background-color: #9b59b6;
        border-radius: 50%;
        color: white;
        display: flex;
        justify-content: center;
        align-items: center;
        text-align: center;
        font-size: 10px;
        font-weight: bold;
        cursor: pointer;
        transition: all 0.3s;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
        animation: playerAppear 0.5s ease-out;
      }
      .bench-player:hover {
        transform: scale(1.1);
        background-color: #8e44ad;
        box-shadow: 0 0 15px rgba(0, 0, 0, 0.6);
      }
      .dropzone {
        border: 2px dashed rgba(255, 255, 255, 0.4);
        background-color: rgba(255, 255, 255, 0.1);
      }

      /* Theme toggle */
      .theme-toggle {
        position: fixed;
        top: 20px;
        left: 20px;
        background-color: #2c3e50;
        color: white;
        width: 40px;
        height: 40px;
        border-radius: 50%;
        display: flex;
        justify-content: center;
        align-items: center;
        cursor: pointer;
        transition: all 0.3s;
        z-index: 100;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
      }
      .theme-toggle:hover {
        transform: rotate(180deg);
        background-color: #e74c3c;
      }

      /* Dark theme */
      body.dark-theme {
        background-color: #2c3e50;
        color: white;
      }
      body.dark-theme h1 {
        color: #ecf0f1;
      }
      body.dark-theme .football-field {
        background-color: #27ae60;
        box-shadow: 0 0 15px rgba(0, 0, 0, 0.5);
      }
      body.dark-theme .player {
        background-color: #e74c3c;
      }
      body.dark-theme .bench-player {
        background-color: #8e44ad;
      }
      body.dark-theme .bench-player:hover {
        background-color: #9b59b6;
      }
      body.dark-theme .player-list {
        background-color: #34495e;
        color: white;
      }
      body.dark-theme td {
        border-bottom: 1px solid #3498db;
        color: #ecf0f1;
      }
      body.dark-theme .player-bench {
        background-color: #2c3e50;
        box-shadow: 0 0 15px rgba(0, 0, 0, 0.5);
      }
    </style>
  </head>
  <body>
    <div class="theme-toggle" onclick="toggleTheme()">🌓</div>
    <h1>تشكيلة فريق كرة القدم - مدرسة السويس للتكنولوجيا التطبيقية</h1>
    <div class="formation-name" id="formation-name">التشكيل 4-4-2</div>

    <div class="football-field" id="field">
      <div class="center-circle"></div>
      <div class="goal-area goal-area-top"></div>
      <div class="goal-area goal-area-bottom"></div>
    </div>

    <div class="player-bench" id="player-bench">
      <div class="bench-title">لاعبي الاحتياط</div>
      <!-- سيتم إضافة لاعبي الاحتياط هنا بواسطة الجافاسكربت -->
    </div>

    <div class="controls">
      <button onclick="changeFormation('4-4-2')">تشكيل 4-4-2</button>
      <button onclick="changeFormation('4-3-3')">تشكيل 4-3-3</button>
      <button onclick="changeFormation('3-5-2')">تشكيل 3-5-2</button>
      <button onclick="changeFormation('5-3-2')">تشكيل 5-3-2</button>
      <button onclick="togglePlayerList()" class="toggle-list">
        عرض قائمة اللاعبين
      </button>
    </div>

    <div class="player-list" id="player-list">
      <h2>قائمة اللاعبين</h2>
      <table>
        <tr>
          <th>م</th>
          <th>اسم الطالب</th>
          <th>رقم الجلوس</th>
        </tr>
      </table>
    </div>

    <script>
      // بيانات الطلاب
      const players = [
        { id: 1, name: "حازم محمد عز الدين محمد قاسم", seatNumber: "C355" },
        { id: 2, name: "رامي عبدالكريم احمد محمد", seatNumber: "C356" },
        { id: 3, name: "شادي خلف الله احمد", seatNumber: "C357" },
        { id: 4, name: "سيف الدين محمد صلاح زغلول", seatNumber: "C358" },
        { id: 5, name: "سيف الله مصطفى غريب مصطفى محمد", seatNumber: "C359" },
        { id: 6, name: "شهيد محمد محمود السيد", seatNumber: "C360" },
        { id: 7, name: "طارق غريب جاد الرب عبد المجيد", seatNumber: "C361" },
        { id: 8, name: "عبدالرحمن رياض حافظ محمد", seatNumber: "C362" },
        {
          id: 9,
          name: "عبدالله حسام محمود محمد عبد الرحيم",
          seatNumber: "C363",
        },
        { id: 10, name: "عبدالله محمود حسين محمد", seatNumber: "C364" },
        { id: 11, name: "عدوي محمود عدوي محمود عبد", seatNumber: "C365" },
        { id: 12, name: "علي احمد سعيد علي محمود", seatNumber: "C366" },
        { id: 13, name: "عمر عبد العزيز احمد العزب", seatNumber: "C367" },
        { id: 14, name: "عمر محمد فاروق محمد", seatNumber: "C368" },
        { id: 15, name: "كريم حسين حسن حسين", seatNumber: "C369" },
        { id: 16, name: "محمد احمد شحته احمد", seatNumber: "C370" },
        { id: 17, name: "محمد محمود سلامه احمد", seatNumber: "C371" },
        { id: 18, name: "محمد محمود عبد الفتاح ابو الحسن", seatNumber: "C372" },
      ];

      // تبديل السمة (الثيم)
      function toggleTheme() {
        document.body.classList.toggle("dark-theme");
      }

      // إنشاء جدول اللاعبين
      function createPlayerTable() {
        const table = document.querySelector(".player-list table");

        players.forEach((player) => {
          const row = document.createElement("tr");
          row.innerHTML = `
                    <td>${player.id}</td>
                    <td>${player.name}</td>
                    <td>${player.seatNumber}</td>
                `;
          table.appendChild(row);
        });
      }

      createPlayerTable();

      // إضافة اللاعبين للملعب ودكة الاحتياط
      function addPlayersToField(formation) {
        const field = document.getElementById("field");
        const bench = document.getElementById("player-bench");

        // إزالة اللاعبين الحاليين من الملعب ودكة الاحتياط
        const existingPlayers = document.querySelectorAll(
          ".player, .bench-player"
        );
        existingPlayers.forEach((player) => player.remove());

        // إضافة عنوان لدكة الاحتياط
        if (!document.querySelector(".bench-title")) {
          const benchTitle = document.createElement("div");
          benchTitle.className = "bench-title";
          benchTitle.textContent = "لاعبي الاحتياط";
          bench.appendChild(benchTitle);
        }

        // إضافة اللاعبين حسب التشكيل
        let positions = [];

        switch (formation) {
          case "4-4-2":
            positions = [
              { top: "85%", left: "50%" }, // حارس المرمى
              { top: "70%", left: "20%" }, // دفاع
              { top: "70%", left: "40%" }, // دفاع
              { top: "70%", left: "60%" }, // دفاع
              { top: "70%", left: "80%" }, // دفاع
              { top: "50%", left: "20%" }, // وسط
              { top: "50%", left: "40%" }, // وسط
              { top: "50%", left: "60%" }, // وسط
              { top: "50%", left: "80%" }, // وسط
              { top: "25%", left: "35%" }, // هجوم
              { top: "25%", left: "65%" }, // هجوم
            ];
            break;
          case "4-3-3":
            positions = [
              { top: "85%", left: "50%" }, // حارس المرمى
              { top: "70%", left: "20%" }, // دفاع
              { top: "70%", left: "40%" }, // دفاع
              { top: "70%", left: "60%" }, // دفاع
              { top: "70%", left: "80%" }, // دفاع
              { top: "50%", left: "30%" }, // وسط
              { top: "50%", left: "50%" }, // وسط
              { top: "50%", left: "70%" }, // وسط
              { top: "25%", left: "25%" }, // هجوم
              { top: "15%", left: "50%" }, // هجوم
              { top: "25%", left: "75%" }, // هجوم
            ];
            break;
          case "3-5-2":
            positions = [
              { top: "85%", left: "50%" }, // حارس المرمى
              { top: "70%", left: "30%" }, // دفاع
              { top: "70%", left: "50%" }, // دفاع
              { top: "70%", left: "70%" }, // دفاع
              { top: "50%", left: "15%" }, // وسط
              { top: "50%", left: "35%" }, // وسط
              { top: "45%", left: "50%" }, // وسط
              { top: "50%", left: "65%" }, // وسط
              { top: "50%", left: "85%" }, // وسط
              { top: "25%", left: "35%" }, // هجوم
              { top: "25%", left: "65%" }, // هجوم
            ];
            break;
          case "5-3-2":
            positions = [
              { top: "85%", left: "50%" }, // حارس المرمى
              { top: "70%", left: "15%" }, // دفاع
              { top: "70%", left: "30%" }, // دفاع
              { top: "75%", left: "50%" }, // دفاع
              { top: "70%", left: "70%" }, // دفاع
              { top: "70%", left: "85%" }, // دفاع
              { top: "50%", left: "30%" }, // وسط
              { top: "45%", left: "50%" }, // وسط
              { top: "50%", left: "70%" }, // وسط
              { top: "25%", left: "35%" }, // هجوم
              { top: "25%", left: "65%" }, // هجوم
            ];
            break;
        }

        // حساب عدد اللاعبين في التشكيلة الأساسية
        const starters = Math.min(11, players.length);

        // إضافة اللاعبين الأساسيين في الملعب
        for (let i = 0; i < starters; i++) {
          const player = document.createElement("div");
          player.className = "player";
          player.id = `player-field-${i}`;
          player.setAttribute("data-player-id", players[i].id);
          player.innerHTML = `<div class="player-name">${players[i].name}</div>`;
          player.style.top = positions[i].top;
          player.style.left = positions[i].left;
          player.title = `${players[i].name} - ${players[i].seatNumber}`;

          // جعل اللاعبين قابلين للسحب
          player.draggable = true;

          // إضافة تأخير للرسوم المتحركة
          setTimeout(() => {
            field.appendChild(player);
          }, i * 100);
        }

        // إضافة باقي اللاعبين في دكة الاحتياط
        for (let i = starters; i < players.length; i++) {
          const player = document.createElement("div");
          player.className = "bench-player";
          player.id = `player-bench-${i}`;
          player.setAttribute("data-player-id", players[i].id);
          player.innerHTML = `<div class="player-name">${players[i].name}</div>`;
          player.title = `${players[i].name} - ${players[i].seatNumber}`;

          // جعل لاعبي الاحتياط قابلين للسحب
          player.draggable = true;

          // إضافة تأخير للرسوم المتحركة
          setTimeout(() => {
            bench.appendChild(player);
          }, (i - starters) * 100 + 500);
        }

        // تحديث اسم التشكيل
        document.getElementById(
          "formation-name"
        ).textContent = `التشكيل ${formation}`;

        // إعادة تعيين استماعات السحب والإفلات
        setupDragAndDrop();
      }

      function changeFormation(formation) {
        addPlayersToField(formation);
      }

      function togglePlayerList() {
        const playerList = document.getElementById("player-list");
        if (playerList.style.display === "block") {
          playerList.style.display = "none";
        } else {
          playerList.style.display = "block";
        }
      }

      // وظائف السحب والإفلات المُحسّنة
      function setupDragAndDrop() {
        const draggables = document.querySelectorAll(".player, .bench-player");
        const droppables = [
          document.getElementById("field"),
          document.getElementById("player-bench"),
        ];

        draggables.forEach((draggable) => {
          draggable.addEventListener("dragstart", dragStart);
          draggable.addEventListener("dragend", dragEnd);
        });

        droppables.forEach((droppable) => {
          droppable.addEventListener("dragover", dragOver);
          droppable.addEventListener("dragenter", dragEnter);
          droppable.addEventListener("dragleave", dragLeave);
          droppable.addEventListener("drop", drop);
        });
      }

      function dragStart(e) {
        this.classList.add("dragging");
        e.dataTransfer.setData("text/plain", this.id);
        e.dataTransfer.setData(
          "application/json",
          JSON.stringify({
            id: this.id,
            playerId: this.getAttribute("data-player-id"),
            name: this.querySelector(".player-name").textContent,
            fromField: this.classList.contains("player"),
          })
        );

        setTimeout(() => {
          this.style.opacity = "0.4";
        }, 0);
      }

      function dragEnd() {
        this.classList.remove("dragging");
        this.style.opacity = "1";
      }

      function dragOver(e) {
        e.preventDefault();
      }

      function dragEnter(e) {
        e.preventDefault();
        this.classList.add("dropzone");
      }

      function dragLeave() {
        this.classList.remove("dropzone");
      }

      function drop(e) {
        e.preventDefault();
        this.classList.remove("dropzone");

        const data = JSON.parse(e.dataTransfer.getData("application/json"));
        const draggedElement = document.getElementById(data.id);

        if (!draggedElement) return;

        // تحديد ما إذا كان السحب من الملعب إلى الاحتياط أو العكس
        const toField = this.id === "field";
        const fromField = data.fromField;

        // إزالة العنصر المسحوب من الموقع الحالي
        draggedElement.remove();

        // إنشاء عنصر جديد في الموقع الهدف
        const newElement = document.createElement("div");

        if (toField) {
          // إضافة لاعب إلى الملعب
          newElement.className = "player";
          newElement.id = `player-field-${Date.now()}`;

          // تحديد الموقع في الملعب
          const fieldRect = this.getBoundingClientRect();
          const x = e.clientX - fieldRect.left;
          const y = e.clientY - fieldRect.top;

          newElement.style.left = `${(x / fieldRect.width) * 100}%`;
          newElement.style.top = `${(y / fieldRect.height) * 100}%`;

          // رسم متحرك للإضافة إلى الملعب
          newElement.style.animation = "playerAppear 0.5s ease-out";
        } else {
          // إضافة لاعب إلى الاحتياط
          newElement.className = "bench-player";
          newElement.id = `player-bench-${Date.now()}`;

          // رسم متحرك للإضافة إلى الاحتياط
          newElement.style.animation = "playerAppear 0.5s ease-out";
        }

        // إعداد العنصر الجديد
        newElement.setAttribute("data-player-id", data.playerId);
        newElement.innerHTML = `<div class="player-name">${data.name}</div>`;
        newElement.draggable = true;
        newElement.addEventListener("dragstart", dragStart);
        newElement.addEventListener("dragend", dragEnd);

        // إضافة العنصر إلى الهدف
        this.appendChild(newElement);
      }

      // تحميل التشكيل الافتراضي
      window.onload = function () {
        addPlayersToField("4-4-2");
      };
    </script>
  </body>
</html>
